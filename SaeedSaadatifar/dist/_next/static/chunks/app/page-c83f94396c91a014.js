(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1344:function(e,t,l){Promise.resolve().then(l.bind(l,4692))},4692:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return components_Control}});var n,s=l(7437),o=l(2265);let createStoreImpl=e=>{let t;let l=new Set,setState=(e,n)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=n?n:"object"!=typeof s)?s:Object.assign({},t,s),l.forEach(l=>l(t,e))}},getState=()=>t,n={setState,getState,subscribe:e=>(l.add(e),()=>l.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),l.clear()}};return t=e(setState,getState,n),n},createStore=e=>e?createStoreImpl(e):createStoreImpl;var c=l(5401);let{useSyncExternalStoreWithSelector:i}=c,d=!1,createImpl=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?createStore(e):e,useBoundStore=(e,l)=>(function(e,t=e.getState,l){l&&!d&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),d=!0);let n=i(e.subscribe,e.getState,e.getServerState||e.getState,t,l);return(0,o.useDebugValue)(n),n})(t,e,l);return Object.assign(useBoundStore,t),useBoundStore},u=(n?createImpl(n):createImpl)(e=>({Contacts:[],AllChats:[],refresh:0,selectedContact:null,setSelectedContact:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e(()=>({selectedContact:t}))},setContacts:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e(()=>({Contacts:t}))},setAllChats:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e(()=>({AllChats:t}))},setRefresh:()=>e(e=>({refresh:e.refresh+1}))}));var Chats=()=>{let{AllChats:e,selectedContact:t}=u(),l=(0,o.useRef)();return(0,o.useEffect)(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight-l.current.clientHeight)},[e,t]),(0,s.jsx)("div",{ref:l,className:"flex overflow-y-auto grow gap-2 p-2 flex-col ".concat(e.filter(e=>e.receiver==(null==t?void 0:t.username)||e.sender==(null==t?void 0:t.username)).length>0?"":"justify-center items-center"),children:e.filter(e=>e.receiver==(null==t?void 0:t.username)||e.sender==(null==t?void 0:t.username)).length>0?e.filter(e=>e.receiver==(null==t?void 0:t.username)||e.sender==(null==t?void 0:t.username)).map(e=>(0,s.jsxs)("div",{className:"p-2 ".concat("09125151322"==e.receiver?"self-start":"self-end"," w-64 border break-words border-black rounded-2xl"),children:[(0,s.jsx)("div",{className:"text-lg font-semibold",children:e.text}),(0,s.jsx)("div",{className:"text-end text-xs font-semibold",children:new Date(e.date).toLocaleString("fa-ir")})]},e.id)):"No Message"})},components_DeleteContact=e=>{let{number:t,setIsShowDelete:l}=e,{setSelectedContact:n,setRefresh:o}=u();return(0,s.jsx)("div",{onClick:e=>{l(!1)},className:"absolute h-screen w-screen backdrop-blur-sm flex justify-center items-center",children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"flex shadow-black shadow-2xl drop-shadow-2xl px-14 relative gap-7 flex-col p-10 items-center bg-slate-600 rounded-2xl",children:[(0,s.jsx)("div",{onClick:e=>{l(!1)},className:"absolute hover:bg-slate-300 cursor-pointer top-3 left-3 border border-black p-2 rounded-full",children:"X"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:"Delete Contact"}),(0,s.jsx)("p",{className:"text-sm font-semibold",children:"Are You Want Delete This Contact?"}),(0,s.jsx)("button",{onClick:()=>{let e=JSON.stringify({username:t});fetch("https://farawin.iran.liara.run/api/contact",{headers:{authorization:"eyJ1c2VybmFtZSI6IjA5MTI1MTUxMzIyIiwicGFzc3dvcmQiOiIxMjM0NTY3OCIsIm5hbWUiOiJTYWVlZCBTYWFkYXRpZmFyIiwiZGF0ZSI6IjIwMjMtMDgtMDlUMDg6MzY6MDEuMzU2WiJ9"},body:e,method:"DELETE"}).then(e=>e.json().then(e=>{alert(e.message),"200"==e.code&&(l(!1),n(null),o())}))},className:"w-full rounded-2xl py-2 hover:bg-slate-300 cursor-pointer border border-black",children:"Delete"})]})})},components_EditPage=e=>{let{nam:t,number:l,setIsShowEdit:n}=e,[c,i]=(0,o.useState)(t),{setRefresh:d}=u();return(0,s.jsx)("div",{onClick:e=>{n(!1)},className:"absolute h-screen w-screen backdrop-blur-sm flex justify-center items-center",children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"flex shadow-black shadow-2xl drop-shadow-2xl px-14 relative gap-7 flex-col p-10 items-center bg-slate-600 rounded-2xl",children:[(0,s.jsx)("div",{onClick:e=>{n(!1)},className:"absolute hover:bg-slate-300 cursor-pointer top-3 left-3 border border-black p-2 rounded-full",children:"X"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:"Edit Contact"}),(0,s.jsxs)("div",{className:"flex flex-col relative",children:[(0,s.jsx)("label",{className:"absolute font-semibold bg-slate-600 top-[-13px] left-3 px-1",htmlFor:"name",children:"Name :"}),(0,s.jsx)("input",{value:c,onInput:e=>i(e.target.value),id:"name",className:"bg-slate-600 text-white text-xs placeholder:text-xs placeholder:text-slate-200 placeholder:opacity-60 border border-black p-3 rounded-xl focus:outline-none"})]}),(0,s.jsxs)("div",{className:"flex flex-col relative",children:[(0,s.jsx)("label",{className:"absolute font-semibold bg-slate-600 top-[-13px] left-3 px-1",htmlFor:"number",children:"Number :"}),(0,s.jsx)("input",{disabled:!0,value:l,id:"number",className:"bg-slate-600 text-white text-xs placeholder:text-xs placeholder:text-slate-200 placeholder:opacity-60 border border-black p-3 rounded-xl focus:outline-none"})]}),(0,s.jsx)("button",{onClick:()=>{fetch("https://farawin.iran.liara.run/api/contact",{headers:{authorization:"eyJ1c2VybmFtZSI6IjA5MTI1MTUxMzIyIiwicGFzc3dvcmQiOiIxMjM0NTY3OCIsIm5hbWUiOiJTYWVlZCBTYWFkYXRpZmFyIiwiZGF0ZSI6IjIwMjMtMDgtMDlUMDg6MzY6MDEuMzU2WiJ9"},body:'{\n "username":"'.concat(l,'",\n "name":"').concat(c,'"\n}'),method:"PUT"}).then(e=>e.json().then(e=>{alert(e.message),"200"==e.code&&(n(!1),d())}))},className:"w-full rounded-2xl mt-7 py-2 hover:bg-slate-300 cursor-pointer border border-black",children:"Edit"})]})})},components_ChatPage=()=>{let{setRefresh:e,selectedContact:t,setSelectedContact:l}=u(),[n,c]=(0,o.useState)(!1),[i,d]=(0,o.useState)(!1),[x,h]=(0,o.useState)(""),m=(0,o.useRef)();return(0,s.jsxs)(s.Fragment,{children:[n&&(0,s.jsx)(components_EditPage,{number:null==t?void 0:t.username,setIsShowEdit:c,nam:null==t?void 0:t.name}),i&&(0,s.jsx)(components_DeleteContact,{number:null==t?void 0:t.username,setIsShowDelete:d}),(0,s.jsxs)("div",{className:"grow p-3 bg-blue-300 flex flex-col",children:[(0,s.jsxs)("div",{className:"bg-green-500 gap-3 rounded-xl flex p-3",children:[(0,s.jsx)("div",{onClick:e=>{l(null)},className:"p-3 cursor-pointer hover:bg-slate-300 rounded-xl border border-black",children:"Back"}),(0,s.jsxs)("div",{className:"flex gap-3 grow",children:[(0,s.jsx)("div",{className:"flex grow items-center text-xl font-semibold",children:null==t?void 0:t.name}),(0,s.jsx)("div",{onClick:()=>{c(!0)},className:"p-2 cursor-pointer hover:bg-slate-300  px-4 flex items-center text-xs rounded-xl border border-black",children:"Edit"}),(0,s.jsx)("div",{onClick:()=>d(!0),className:"p-2 cursor-pointer hover:bg-slate-300 flex items-center text-xs rounded-xl border border-black",children:"Delete"}),(0,s.jsx)("div",{onClick:()=>e(),className:"p-2 cursor-pointer hover:bg-slate-300 flex items-center text-xs rounded-xl border border-black",children:"Refresh"})]})]}),(0,s.jsx)(Chats,{}),(0,s.jsxs)("div",{className:"bg-green-500 gap-3 rounded-xl flex p-3",children:[(0,s.jsx)("input",{onInput:e=>h(e.target.value),ref:m,placeholder:"Message",className:"grow p-1 text-white placeholder:opacity-50 placeholder:text-white bg-green-500 focus:outline-none"}),(0,s.jsx)("div",{onClick:()=>{let l=JSON.stringify({contactUsername:null==t?void 0:t.username,textHtml:x});fetch("https://farawin.iran.liara.run/api/chat",{headers:{authorization:"eyJ1c2VybmFtZSI6IjA5MTI1MTUxMzIyIiwicGFzc3dvcmQiOiIxMjM0NTY3OCIsIm5hbWUiOiJTYWVlZCBTYWFkYXRpZmFyIiwiZGF0ZSI6IjIwMjMtMDgtMDlUMDg6MzY6MDEuMzU2WiJ9"},body:l,method:"POST"}).then(t=>t.json().then(t=>{"200"==t.code&&(m.current.value="",e())}))},className:"p-2 cursor-pointer hover:bg-slate-300  px-4 flex items-center text-xs rounded-xl border border-black",children:"Send"})]})]})]})},components_Contacts=()=>{let{Contacts:e,setSelectedContact:t,selectedContact:l}=u();return(0,s.jsx)("div",{className:"flex p-1 flex-col overflow-y-auto grow",children:e.map(e=>(0,s.jsxs)("div",{onClick:l=>{t(e),l.stopPropagation()},className:"py-2 ".concat((null==l?void 0:l.username)==e.username&&"bg-slate-500"," px-5 flex gap-3 hover:bg-slate-400 rounded-xl cursor-pointer"),children:[(0,s.jsx)("div",{className:"h-10 w-10 border my-auto border-black rounded-full"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-lg font-bold",children:e.name}),(0,s.jsx)("div",{className:"text-xs",children:e.username})]})]},e.ref+e.username))})},components_AddContact=e=>{let{setIsShowAdd:t}=e,[l,n]=(0,o.useState)(""),{setRefresh:c}=u(),[i,d]=(0,o.useState)("");return(0,s.jsx)("div",{onClick:e=>{t(!1)},className:"absolute h-screen w-screen backdrop-blur-sm flex justify-center items-center",children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"flex shadow-black shadow-2xl drop-shadow-2xl px-14 relative gap-7 flex-col p-10 items-center bg-slate-600 rounded-2xl",children:[(0,s.jsx)("div",{onClick:e=>{t(!1)},className:"absolute hover:bg-slate-300 cursor-pointer top-3 left-3 border border-black p-2 rounded-full",children:"X"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:"Add Contact"}),(0,s.jsxs)("div",{className:"flex flex-col relative",children:[(0,s.jsx)("label",{className:"absolute font-semibold bg-slate-600 top-[-13px] left-3 px-1",htmlFor:"name",children:"Name :"}),(0,s.jsx)("input",{onInput:e=>n(e.target.value),id:"name",placeholder:"Saeed",className:"bg-slate-600 text-white text-xs placeholder:text-xs placeholder:text-slate-200 placeholder:opacity-60 border border-black p-3 rounded-xl focus:outline-none"})]}),(0,s.jsxs)("div",{className:"flex flex-col relative",children:[(0,s.jsx)("label",{className:"absolute font-semibold bg-slate-600 top-[-13px] left-3 px-1",htmlFor:"number",children:"Number :"}),(0,s.jsx)("input",{onInput:e=>d(e.target.value),maxLength:11,id:"number",placeholder:"09000000000",className:"bg-slate-600 text-white text-xs placeholder:text-xs placeholder:text-slate-200 placeholder:opacity-60 border border-black p-3 rounded-xl focus:outline-none"})]}),(0,s.jsx)("button",{onClick:()=>{fetch("https://farawin.iran.liara.run/api/contact",{headers:{authorization:"eyJ1c2VybmFtZSI6IjA5MTI1MTUxMzIyIiwicGFzc3dvcmQiOiIxMjM0NTY3OCIsIm5hbWUiOiJTYWVlZCBTYWFkYXRpZmFyIiwiZGF0ZSI6IjIwMjMtMDgtMDlUMDg6MzY6MDEuMzU2WiJ9"},body:'{\n "username":"'.concat(i,'",\n "name":"').concat(l,'"\n}'),method:"POST"}).then(e=>e.json().then(e=>{alert(e.message),"200"==e.code&&(t(!1),c())}))},className:"w-full rounded-2xl mt-7 py-2 hover:bg-slate-300 cursor-pointer border border-black",children:"Add"})]})})},components_Sidebar=()=>{let{setRefresh:e}=u(),[t,l]=(0,o.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(components_AddContact,{setIsShowAdd:l,setRefresh:e}),(0,s.jsxs)("div",{className:"w-1/3 p-3 bg-red-400 h-screen flex flex-col",children:[(0,s.jsxs)("div",{className:" flex border-b pb-3 w-full",children:[(0,s.jsx)("div",{className:"text-2xl grow my-auto font-bold ",children:"Farawin"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{onClick:()=>e(),className:"p-2 border border-black rounded-xl hover:bg-slate-300 cursor-pointer",children:"Ref"}),(0,s.jsx)("div",{onClick:()=>l(!0),className:"p-2 border border-black rounded-xl hover:bg-slate-300 cursor-pointer",children:"Add"})]})]}),(0,s.jsx)(components_Contacts,{})]})]})},components_Home=()=>{let{refresh:e,selectedContact:t,setContacts:l,setAllChats:n}=u();return(0,o.useEffect)(()=>{fetch("https://farawin.iran.liara.run/api/contact",{headers:{authorization:"eyJ1c2VybmFtZSI6IjA5MTI1MTUxMzIyIiwicGFzc3dvcmQiOiIxMjM0NTY3OCIsIm5hbWUiOiJTYWVlZCBTYWFkYXRpZmFyIiwiZGF0ZSI6IjIwMjMtMDgtMDlUMDg6MzY6MDEuMzU2WiJ9"}}).then(e=>e.json().then(e=>l(e.contactList.filter(e=>"09125151322"==e.ref)))),fetch("https://farawin.iran.liara.run/api/chat",{headers:{authorization:"eyJ1c2VybmFtZSI6IjA5MTI1MTUxMzIyIiwicGFzc3dvcmQiOiIxMjM0NTY3OCIsIm5hbWUiOiJTYWVlZCBTYWFkYXRpZmFyIiwiZGF0ZSI6IjIwMjMtMDgtMDlUMDg6MzY6MDEuMzU2WiJ9"},method:"GET"}).then(e=>e.json().then(e=>{"200"==e.code&&n(e.chatList.filter(e=>"09125151322"==e.receiver||"09125151322"==e.sender).sort((e,t)=>+new Date(e.date)-+new Date(t.date)))}))},[e]),(0,s.jsx)("div",{className:"h-screen w-screen",children:(0,s.jsxs)("div",{className:"flex w-full h-full",children:[(0,s.jsx)(components_Sidebar,{}),t&&(0,s.jsx)(components_ChatPage,{})]})})},components_Control=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(components_Home,{})})},622:function(e,t,l){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=l(2265),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,l){var n,o={},u=null,x=null;for(n in void 0!==l&&(u=""+l),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(x=t.ref),t)c.call(t,n)&&!d.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:s,type:e,key:u,ref:x,props:o,_owner:i.current}}t.Fragment=o,t.jsx=q,t.jsxs=q},7437:function(e,t,l){"use strict";e.exports=l(622)},1853:function(e,t,l){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=l(2265),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,c=n.useEffect,i=n.useLayoutEffect,d=n.useDebugValue;function r(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!s(e,l)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var l=t(),n=o({inst:{value:l,getSnapshot:t}}),s=n[0].inst,u=n[1];return i(function(){s.value=l,s.getSnapshot=t,r(s)&&u({inst:s})},[e,l,t]),c(function(){return r(s)&&u({inst:s}),e(function(){r(s)&&u({inst:s})})},[e]),d(l),l};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},8704:function(e,t,l){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=l(2265),s=l(6272),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},c=s.useSyncExternalStore,i=n.useRef,d=n.useEffect,u=n.useMemo,x=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,l,n,s){var h=i(null);if(null===h.current){var m={hasValue:!1,value:null};h.current=m}else m=h.current;var p=c(e,(h=u(function(){function a(t){if(!i){if(i=!0,e=t,t=n(t),void 0!==s&&m.hasValue){var l=m.value;if(s(l,t))return c=l}return c=t}if(l=c,o(e,t))return l;var d=n(t);return void 0!==s&&s(l,d)?l:(e=t,c=d)}var e,c,i=!1,d=void 0===l?null:l;return[function(){return a(t())},null===d?void 0:function(){return a(d())}]},[t,l,n,s]))[0],h[1]);return d(function(){m.hasValue=!0,m.value=p},[p]),x(p),p}},6272:function(e,t,l){"use strict";e.exports=l(1853)},5401:function(e,t,l){"use strict";e.exports=l(8704)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=1344)}),_N_E=e.O()}]);